# Puerto en el que se ejecutará esta aplicación.
# Se usa 8082 para diferenciarlo del prestador single-tenant (8081).
server.port=8082


# ===============================================
# CONEXIÓN A LA BASE DE DATOS
# ===============================================
# URL de conexión a la base de datos PostgreSQL compartida.
spring.datasource.url=jdbc:postgresql://localhost:5432/hcen_periferico_db
# Usuario de la base de datos. Este usuario debe tener permisos para acceder a múltiples schemas.
spring.datasource.username=hcen_periferico_user
# Contraseña del usuario de la base de datos.
spring.datasource.password=secret_password

# ===============================================
# CONFIGURACIÓN DE HIBERNATE MULTI-TENANCY
# (El núcleo del aislamiento de datos)
# ===============================================
# 1. Activar la estrategia de aislamiento por SCHEMA.
# Esto le dice a Hibernate que cada tenant vive en su propio schema.
spring.jpa.properties.hibernate.multiTenancy=SCHEMA

# 2. Indicar a Hibernate dónde encontrar nuestras clases de configuración personalizadas.
# Le decimos cómo encontrar la clase que sabe cambiar de schema.
spring.jpa.properties.hibernate.multi_tenant_connection_provider=uy.com.tenant.config.SchemaMultiTenantConnectionProvider
# Le decimos cómo encontrar la clase que sabe cuál es el tenant de la petición actual.
spring.jpa.properties.hibernate.tenant_identifier_resolver=uy.com.tenant.config.TenantIdentifierResolver

# 3. Desactivar la gestión automática del schema por parte de Spring.
# Esto es CRÍTICO. Le decimos a nuestra aplicación: "No intentes crear ni modificar tablas.
# Esa es responsabilidad de HCEN durante el proceso de alta de un tenant".
spring.jpa.hibernate.ddl-auto=none

# ===============================================
# CONFIGURACIÓN DE SEGURIDAD (JWT)
# ===============================================
# Secreto compartido GLOBAL para firmar y verificar JWTs (Enfoque para proyecto académico).
# Esta es la "llave maestra" que tanto HCEN como este componente deben conocer.
# En un entorno de producción, esto DEBE ser una variable de entorno y no estar en el código.
jwt.secret=UnSecretoMuyLargoSeguroYComplejoQueNadieDebeAdivinarParaElComponentePeriferico12345

# Duración de los tokens de sesión de los usuarios (en milisegundos).
# 8 horas = 8 * 60 * 60 * 1000 = 28800000.
jwt.session.expiration-ms=28800000
