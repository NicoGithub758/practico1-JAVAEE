
echo "--- Iniciando script de assemble PERSONALIZADO ---"

# 1. Instalar Maven
# Descargamos Maven, lo descomprimimos y lo añadimos al PATH.
echo "-> Instalando Maven..."
curl -s https://dlcdn.apache.org/maven/maven-3/3.9.6/binaries/apache-maven-3.9.6-bin.tar.gz -o /tmp/maven.tar.gz
tar -xzf /tmp/maven.tar.gz -C /tmp
export PATH=/tmp/apache-maven-3.9.6/bin:$PATH
echo "Maven instalado en: $(mvn -v)"

# 2. Ejecutar el script 'assemble' original de la imagen
# Ahora que 'mvn' existe, el script original funcionará.
echo "-> Ejecutando el script de assemble original de la imagen S2I..."
/usr/libexec/s2i/assemble

echo "--- Script de assemble PERSONALIZADO finalizado ---"
